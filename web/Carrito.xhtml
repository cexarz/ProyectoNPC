<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./Plantillas/usuarios.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form id="form">
            <p:dataTable var="producto" value="#{CarritoB.listaCarrito}">
                <f:facet name="header">
                    Carrito
                </f:facet>

                <p:column headerText="Imagen">
                    <p:graphicImage value="#{CarritoB.imageProductoImpresora}" width="250px" height="200px" cache="false">
                        <f:param name="id" value="#{producto.id_Producto}"/>
                        <f:param name="imagen" value="#{producto.imagen}" />
                    </p:graphicImage>
                </p:column>

                <p:column headerText="Producto">
                    <h:outputText value="#{producto.nombre}" />
                </p:column>

                <p:column headerText="Cantidad">
                    <p:inputText value="#{producto.cantidadCarrito}">
                        <p:ajax event="blur" update="mensaje" listener="#{CarritoB.hayStock}"/>
                    </p:inputText>
                    <h:message for="mensaje"/>
                    <h:outputText style="color: white" id="mensaje" value="#{CarritoB.mensaje}"/> 
                </p:column>

                <p:column headerText="Precio">
                    <h:outputText value="#{producto.precio}" />
                </p:column>

                <p:column headerText="Eliminar">
                    <p:commandLink action="#{CarritoB.eliminarProductoCarrito()}">
                        <h:outputText styleClass="fa fa-times" style="margin:0 auto;"/>
                        <f:setPropertyActionListener value="#{producto}" target="#{CarritoB.productoSeleccionado}" />
                    </p:commandLink>
                </p:column>

                <f:facet name="footer">
                    <span class="p-text-bold">In total there are ? products.</span>
                </f:facet>

            </p:dataTable>
        </h:form>
    </ui:define>

</ui:composition>
